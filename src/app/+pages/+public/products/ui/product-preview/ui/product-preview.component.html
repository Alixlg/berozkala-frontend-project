<div
  class="group flex flex-col h-full bg-white border border-gray-200 shadow-2xs rounded-xl dark:bg-neutral-900 dark:border-neutral-700 dark:shadow-neutral-700/70">

  <div class="h-63 flex justify-center items-center">
    @defer () {
    <img
      class="h-53 flex flex-col justify-center items-center rounded-2xl bg-white dark:bg-black rounded-t-xl cursor-pointer"
      [src]="product.previewImageUrl" alt="product img" routerLink="{{product.id}}">
    } @placeholder {
    <div class="flex justify-center items-center h-53">
      <div
        class="animate-spin inline-block size-8 border-3 border-current border-t-transparent text-gray-600 rounded-full dark:text-gray-500"
        role="status" aria-label="loading">
        <span class="sr-only"></span>
      </div>
    </div>
    }
  </div>

  <div class="p-4 md:p-6 relative">
    <span class="block mb-1 text-xs font-semibold uppercase text-green-600 dark:text-green-500">
      {{product.title}}
    </span>
    <h3 class="text-xl font-semibold text-gray-800 dark:text-neutral-300 dark:hover:text-white">
      برند {{product.brand}}
    </h3>
    <p class="mt-3 text-gray-500 dark:text-neutral-500">
      قیمت <span
        class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-teal-100 text-teal-800 dark:bg-teal-800/30 dark:text-teal-500">{{product.price | number}}<svg
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="size-4">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
      </span>
    </p>

    <!-- Rating -->
    <div class="flex absolute left-5 bottom-5" dir="ltr">

      @for (s of scores; track $index) {
      <svg class="shrink-0 size-5 text-yellow-400 dark:text-yellow-600" xmlns="http://www.w3.org/2000/svg" width="16"
        height="16" fill="currentColor" viewBox="0 0 16 16">
        <path
          d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z">
        </path>
      </svg>
      }

    </div>
    <!-- End Rating -->

  </div>

  <div
    class="mt-auto flex border-t border-gray-200 divide-x divide-gray-200 dark:border-neutral-700 dark:divide-neutral-700">
    <a class="w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-es-xl bg-white text-gray-800 shadow-2xs hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-white dark:hover:bg-neutral-800 dark:focus:bg-neutral-800"
      routerLink="/pb/product/{{product.id}}">
      رفتن به صفحه محصول
    </a>
    <button (click)="onBuy.emit(product)" [disabled]="isAddDisable"
      class="w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-ee-xl bg-white text-gray-800 shadow-2xs hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-white dark:hover:bg-neutral-800 dark:focus:bg-neutral-800">
      افزودن به سبد خرید
    </button>
  </div>
</div>

<!-- <div class="product">

  <div class="pic">

  </div>

  <div class="info">

    <div class="text">

      <span>{{product.title}} ({{product.brand}})
        @if (isBasket) {
        {{product.count}}x
        }
      </span> -->
<!-- har bar ke taghiri dar safhe ijad shavad in func ejra mishavad (render dobare)! -->
<!-- <span>{{countPriceUpdater()| number}}</span> -->

<!-- </div>
    @if (!isBasket) {
    <button [disabled]="isAddDisable" (click)="onBuy.emit(product)">
      افزودن به سبد خرید
    </button>
    }
    @else {
    <button [disabled]="isRemoveDisable" (click)="onRemove.emit(product)">
      حذف از سبد خرید
    </button>
    }

  </div>

</div> -->
